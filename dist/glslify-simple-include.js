"use strict";

var path = require("path");
var GlslSimpleInclude = require("glsl-simple-include");
var read_text_file_1 = require("read-text-file");
function transform(filename, src, opts, done) {
    var processPromise = GlslSimpleInclude.processIncludes(read_text_file_1.read, path, filename, src);
    processPromise.then(function (script) {
        done(null, script);
    }, function (error) {
        if (error !== null && error !== undefined) {
            error = "failed to process includes";
        }
        done(error, null);
    });
}
module.exports = transform;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2xzbGlmeS1zaW1wbGUtaW5jbHVkZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9nbHNsaWZ5LXNpbXBsZS1pbmNsdWRlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBWSxBQUFJLGVBQU0sQUFBTSxBQUFDO0FBQzdCLElBQVksQUFBaUIsNEJBQU0sQUFBcUIsQUFBQztBQUN6RCwrQkFBcUIsQUFBZ0IsQUFBQztBQUV0QyxtQkFBbUIsQUFBZ0IsVUFBRSxBQUFXLEtBQUUsQUFBUyxNQUFFLEFBQXNDO0FBRWxHLFFBQUksQUFBYyxpQkFBRyxBQUFpQixrQkFBQyxBQUFlLGdCQUNyRCxpQkFBSSxNQUNKLEFBQUksTUFDSixBQUFRLFVBQ1IsQUFBRyxBQUFDLEFBQUM7QUFFTixBQUFjLG1CQUFDLEFBQUksS0FDbEIsVUFBVSxBQUFNO0FBRWYsQUFBSSxhQUFDLEFBQUksTUFBRSxBQUFNLEFBQUMsQUFBQyxBQUNwQjtBQUFDLE9BQ0QsVUFBVSxBQUFLO0FBRWQsQUFBRSxBQUFDLFlBQUUsQUFBSyxVQUFLLEFBQUksQUFBQyxBQUFJLElBQXBCLElBQXFCLEFBQUssVUFBSyxBQUFTLEFBQUMsQUFBQyxXQUM5QyxBQUFDO0FBQ0EsQUFBSyxvQkFBRyxBQUE0QixBQUFDLEFBQ3RDO0FBQUM7QUFFRCxBQUFJLGFBQUMsQUFBSyxPQUFFLEFBQUksQUFBQyxBQUFDLEFBQ25CO0FBQUMsQUFBQyxBQUFDLEFBQ0w7QUFBQztBQUVELGlCQUFTLEFBQVMsQUFBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHBhdGggZnJvbSBcInBhdGhcIjtcclxuaW1wb3J0ICogYXMgR2xzbFNpbXBsZUluY2x1ZGUgZnJvbSBcImdsc2wtc2ltcGxlLWluY2x1ZGVcIjtcclxuaW1wb3J0IHsgcmVhZCB9IGZyb20gXCJyZWFkLXRleHQtZmlsZVwiO1xyXG5cclxuZnVuY3Rpb24gdHJhbnNmb3JtKGZpbGVuYW1lOiBzdHJpbmcsIHNyYzogc3RyaW5nLCBvcHRzOiBhbnksIGRvbmU6IChlcnI6IGFueSwgZGF0YTogc3RyaW5nKSA9PiB2b2lkKTogdm9pZFxyXG57XHJcblx0bGV0IHByb2Nlc3NQcm9taXNlID0gR2xzbFNpbXBsZUluY2x1ZGUucHJvY2Vzc0luY2x1ZGVzKFxyXG5cdFx0cmVhZCxcclxuXHRcdHBhdGgsXHJcblx0XHRmaWxlbmFtZSxcclxuXHRcdHNyYyk7XHJcblxyXG5cdHByb2Nlc3NQcm9taXNlLnRoZW4oXHJcblx0XHRmdW5jdGlvbiAoc2NyaXB0KVxyXG5cdFx0e1xyXG5cdFx0XHRkb25lKG51bGwsIHNjcmlwdCk7XHJcblx0XHR9LFxyXG5cdFx0ZnVuY3Rpb24gKGVycm9yKVxyXG5cdFx0e1xyXG5cdFx0XHRpZiAoKGVycm9yICE9PSBudWxsKSAmJiAoZXJyb3IgIT09IHVuZGVmaW5lZCkpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRlcnJvciA9IFwiZmFpbGVkIHRvIHByb2Nlc3MgaW5jbHVkZXNcIjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZG9uZShlcnJvciwgbnVsbCk7XHJcblx0XHR9KTtcclxufVxyXG5cclxuZXhwb3J0ID0gdHJhbnNmb3JtOyJdfQ==