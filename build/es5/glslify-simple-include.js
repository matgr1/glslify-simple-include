"use strict";

require("babel-polyfill");
var path = require("path");
var GlslSimpleInclude = require("glsl-simple-include");
var read_text_file_1 = require("read-text-file");
function transform(filename, src, opts, done) {
    var processPromise = GlslSimpleInclude.processIncludes(read_text_file_1.readTextFile, path, filename, src);
    processPromise.then(function (script) {
        done(null, script);
    }, function (error) {
        if (error !== null && error !== undefined) {
            error = "failed to process includes";
        }
        done(error, null);
    });
}
module.exports = transform;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2xzbGlmeS1zaW1wbGUtaW5jbHVkZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9nbHNsaWZ5LXNpbXBsZS1pbmNsdWRlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBRUEsQUFBTyxRQUFDLEFBQWdCLEFBQUMsQUFBQztBQUcxQixJQUFZLEFBQUksZUFBTSxBQUFNLEFBQUM7QUFDN0IsSUFBWSxBQUFpQiw0QkFBTSxBQUFxQixBQUFDO0FBQ3pELCtCQUE2QixBQUFnQixBQUFDO0FBRTlDLG1CQUFtQixBQUFnQixVQUFFLEFBQVcsS0FBRSxBQUFTLE1BQUUsQUFBc0M7QUFFbEcsUUFBSSxBQUFjLGlCQUFHLEFBQWlCLGtCQUFDLEFBQWUsZ0JBQ3JELGlCQUFZLGNBQ1osQUFBSSxNQUNKLEFBQVEsVUFDUixBQUFHLEFBQUMsQUFBQztBQUVOLEFBQWMsbUJBQUMsQUFBSSxLQUNsQixVQUFVLEFBQU07QUFFZixBQUFJLGFBQUMsQUFBSSxNQUFFLEFBQU0sQUFBQyxBQUFDLEFBQ3BCO0FBQUMsT0FDRCxVQUFVLEFBQUs7QUFFZCxBQUFFLEFBQUMsWUFBRSxBQUFLLFVBQUssQUFBSSxBQUFDLEFBQUksSUFBcEIsSUFBcUIsQUFBSyxVQUFLLEFBQVMsQUFBQyxBQUFDLFdBQzlDLEFBQUM7QUFDQSxBQUFLLG9CQUFHLEFBQTRCLEFBQUMsQUFDdEM7QUFBQztBQUVELEFBQUksYUFBQyxBQUFLLE9BQUUsQUFBSSxBQUFDLEFBQUMsQUFDbkI7QUFBQyxBQUFDLEFBQUMsQUFDTDtBQUFDO0FBRUQsaUJBQVMsQUFBUyxBQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gVE9ETzogdHJ5IHRvIHJlbW92ZSB0aGlzLi4uXHJcbmRlY2xhcmUgbGV0IHJlcXVpcmU6IGFueTtcclxucmVxdWlyZShcImJhYmVsLXBvbHlmaWxsXCIpOyBcclxuXHJcblxyXG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gXCJwYXRoXCI7XHJcbmltcG9ydCAqIGFzIEdsc2xTaW1wbGVJbmNsdWRlIGZyb20gXCJnbHNsLXNpbXBsZS1pbmNsdWRlXCI7XHJcbmltcG9ydCB7IHJlYWRUZXh0RmlsZSB9IGZyb20gXCJyZWFkLXRleHQtZmlsZVwiO1xyXG5cclxuZnVuY3Rpb24gdHJhbnNmb3JtKGZpbGVuYW1lOiBzdHJpbmcsIHNyYzogc3RyaW5nLCBvcHRzOiBhbnksIGRvbmU6IChlcnI6IGFueSwgZGF0YTogc3RyaW5nKSA9PiB2b2lkKTogdm9pZFxyXG57XHJcblx0bGV0IHByb2Nlc3NQcm9taXNlID0gR2xzbFNpbXBsZUluY2x1ZGUucHJvY2Vzc0luY2x1ZGVzKFxyXG5cdFx0cmVhZFRleHRGaWxlLFxyXG5cdFx0cGF0aCxcclxuXHRcdGZpbGVuYW1lLFxyXG5cdFx0c3JjKTtcclxuXHJcblx0cHJvY2Vzc1Byb21pc2UudGhlbihcclxuXHRcdGZ1bmN0aW9uIChzY3JpcHQpXHJcblx0XHR7XHJcblx0XHRcdGRvbmUobnVsbCwgc2NyaXB0KTtcclxuXHRcdH0sXHJcblx0XHRmdW5jdGlvbiAoZXJyb3IpXHJcblx0XHR7XHJcblx0XHRcdGlmICgoZXJyb3IgIT09IG51bGwpICYmIChlcnJvciAhPT0gdW5kZWZpbmVkKSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGVycm9yID0gXCJmYWlsZWQgdG8gcHJvY2VzcyBpbmNsdWRlc1wiO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRkb25lKGVycm9yLCBudWxsKTtcclxuXHRcdH0pO1xyXG59XHJcblxyXG5leHBvcnQgPSB0cmFuc2Zvcm07Il19