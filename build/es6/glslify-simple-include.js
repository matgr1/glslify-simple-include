"use strict";
require("babel-polyfill");
const path = require("path");
const GlslSimpleInclude = require("glsl-simple-include");
const read_text_file_1 = require("read-text-file");
function transform(filename, src, opts, done) {
    let processPromise = GlslSimpleInclude.processIncludes(read_text_file_1.readTextFile, path, filename, src);
    processPromise.then(function (script) {
        done(null, script);
    }, function (error) {
        if ((error !== null) && (error !== undefined)) {
            error = "failed to process includes";
        }
        done(error, null);
    });
}
exports.transform = transform;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2xzbGlmeS1zaW1wbGUtaW5jbHVkZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9nbHNsaWZ5LXNpbXBsZS1pbmNsdWRlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQSxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztBQUUxQixNQUFZLElBQUksV0FBTSxNQUFNLENBQUMsQ0FBQTtBQUM3QixNQUFZLGlCQUFpQixXQUFNLHFCQUFxQixDQUFDLENBQUE7QUFDekQsaUNBQTZCLGdCQUFnQixDQUFDLENBQUE7QUFJOUMsbUJBQTBCLFFBQWdCLEVBQUUsR0FBVyxFQUFFLElBQVMsRUFBRSxJQUF3QjtJQUUzRixJQUFJLGNBQWMsR0FBRyxpQkFBaUIsQ0FBQyxlQUFlLENBQ3JELDZCQUFZLEVBQ1osSUFBSSxFQUNKLFFBQVEsRUFDUixHQUFHLENBQUMsQ0FBQztJQUVOLGNBQWMsQ0FBQyxJQUFJLENBQ2xCLFVBQVUsTUFBTTtRQUVmLElBQUksQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDcEIsQ0FBQyxFQUNELFVBQVUsS0FBSztRQUVkLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQzlDLENBQUM7WUFDQSxLQUFLLEdBQUcsNEJBQTRCLENBQUM7UUFDdEMsQ0FBQztRQUVELElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDbkIsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDO0FBdEJlLGlCQUFTLFlBc0J4QixDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiZGVjbGFyZSBsZXQgcmVxdWlyZTogYW55O1xucmVxdWlyZShcImJhYmVsLXBvbHlmaWxsXCIpO1xuXG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgKiBhcyBHbHNsU2ltcGxlSW5jbHVkZSBmcm9tIFwiZ2xzbC1zaW1wbGUtaW5jbHVkZVwiO1xuaW1wb3J0IHsgcmVhZFRleHRGaWxlIH0gZnJvbSBcInJlYWQtdGV4dC1maWxlXCI7XG5cbmV4cG9ydCB0eXBlIGNvbXBsZXRpb25DYWxsYmFjayA9IChlcnI6IGFueSwgZGF0YTogc3RyaW5nKSA9PiB2b2lkO1xuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtKGZpbGVuYW1lOiBzdHJpbmcsIHNyYzogc3RyaW5nLCBvcHRzOiBhbnksIGRvbmU6IGNvbXBsZXRpb25DYWxsYmFjayk6IHZvaWRcbntcblx0bGV0IHByb2Nlc3NQcm9taXNlID0gR2xzbFNpbXBsZUluY2x1ZGUucHJvY2Vzc0luY2x1ZGVzKFxuXHRcdHJlYWRUZXh0RmlsZSxcblx0XHRwYXRoLFxuXHRcdGZpbGVuYW1lLFxuXHRcdHNyYyk7XG5cblx0cHJvY2Vzc1Byb21pc2UudGhlbihcblx0XHRmdW5jdGlvbiAoc2NyaXB0KVxuXHRcdHtcblx0XHRcdGRvbmUobnVsbCwgc2NyaXB0KTtcblx0XHR9LFxuXHRcdGZ1bmN0aW9uIChlcnJvcilcblx0XHR7XG5cdFx0XHRpZiAoKGVycm9yICE9PSBudWxsKSAmJiAoZXJyb3IgIT09IHVuZGVmaW5lZCkpXG5cdFx0XHR7XG5cdFx0XHRcdGVycm9yID0gXCJmYWlsZWQgdG8gcHJvY2VzcyBpbmNsdWRlc1wiO1xuXHRcdFx0fVxuXG5cdFx0XHRkb25lKGVycm9yLCBudWxsKTtcblx0XHR9KTtcbn0iXX0=