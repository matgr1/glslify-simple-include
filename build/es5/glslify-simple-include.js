"use strict";

var path = require("path");
var GlslSimpleInclude = require("glsl-simple-include");
var read_text_file_1 = require("read-text-file");
function transform(filename, src, opts, done) {
    var processPromise = GlslSimpleInclude.processIncludes(read_text_file_1.readTextFile, path, filename, src);
    processPromise.then(function (script) {
        done(null, script);
    }, function (error) {
        if (error !== null && error !== undefined) {
            error = "failed to process includes";
        }
        done(error, null);
    });
}
exports.transform = transform;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2xzbGlmeS1zaW1wbGUtaW5jbHVkZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9nbHNsaWZ5LXNpbXBsZS1pbmNsdWRlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBWSxBQUFJLGVBQU0sQUFBTSxBQUFDO0FBQzdCLElBQVksQUFBaUIsNEJBQU0sQUFBcUIsQUFBQztBQUN6RCwrQkFBNkIsQUFBZ0IsQUFBQztBQUk5QyxtQkFBMEIsQUFBZ0IsVUFBRSxBQUFXLEtBQUUsQUFBUyxNQUFFLEFBQXdCO0FBRTNGLFFBQUksQUFBYyxpQkFBRyxBQUFpQixrQkFBQyxBQUFlLGdCQUNyRCxpQkFBWSxjQUNaLEFBQUksTUFDSixBQUFRLFVBQ1IsQUFBRyxBQUFDLEFBQUM7QUFFTixBQUFjLG1CQUFDLEFBQUksS0FDbEIsVUFBVSxBQUFNO0FBRWYsQUFBSSxhQUFDLEFBQUksTUFBRSxBQUFNLEFBQUMsQUFBQyxBQUNwQjtBQUFDLE9BQ0QsVUFBVSxBQUFLO0FBRWQsQUFBRSxBQUFDLFlBQUUsQUFBSyxVQUFLLEFBQUksQUFBQyxBQUFJLElBQXBCLElBQXFCLEFBQUssVUFBSyxBQUFTLEFBQUMsQUFBQyxXQUM5QyxBQUFDO0FBQ0EsQUFBSyxvQkFBRyxBQUE0QixBQUFDLEFBQ3RDO0FBQUM7QUFFRCxBQUFJLGFBQUMsQUFBSyxPQUFFLEFBQUksQUFBQyxBQUFDLEFBQ25CO0FBQUMsQUFBQyxBQUFDLEFBQ0w7QUFBQztBQXRCZSxRQUFTLFlBc0J4QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCAqIGFzIEdsc2xTaW1wbGVJbmNsdWRlIGZyb20gXCJnbHNsLXNpbXBsZS1pbmNsdWRlXCI7XG5pbXBvcnQgeyByZWFkVGV4dEZpbGUgfSBmcm9tIFwicmVhZC10ZXh0LWZpbGVcIjtcblxuZXhwb3J0IHR5cGUgY29tcGxldGlvbkNhbGxiYWNrID0gKGVycjogYW55LCBkYXRhOiBzdHJpbmcpID0+IHZvaWQ7XG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm0oZmlsZW5hbWU6IHN0cmluZywgc3JjOiBzdHJpbmcsIG9wdHM6IGFueSwgZG9uZTogY29tcGxldGlvbkNhbGxiYWNrKTogdm9pZFxue1xuXHRsZXQgcHJvY2Vzc1Byb21pc2UgPSBHbHNsU2ltcGxlSW5jbHVkZS5wcm9jZXNzSW5jbHVkZXMoXG5cdFx0cmVhZFRleHRGaWxlLFxuXHRcdHBhdGgsXG5cdFx0ZmlsZW5hbWUsXG5cdFx0c3JjKTtcblxuXHRwcm9jZXNzUHJvbWlzZS50aGVuKFxuXHRcdGZ1bmN0aW9uIChzY3JpcHQpXG5cdFx0e1xuXHRcdFx0ZG9uZShudWxsLCBzY3JpcHQpO1xuXHRcdH0sXG5cdFx0ZnVuY3Rpb24gKGVycm9yKVxuXHRcdHtcblx0XHRcdGlmICgoZXJyb3IgIT09IG51bGwpICYmIChlcnJvciAhPT0gdW5kZWZpbmVkKSlcblx0XHRcdHtcblx0XHRcdFx0ZXJyb3IgPSBcImZhaWxlZCB0byBwcm9jZXNzIGluY2x1ZGVzXCI7XG5cdFx0XHR9XG5cblx0XHRcdGRvbmUoZXJyb3IsIG51bGwpO1xuXHRcdH0pO1xufSJdfQ==